'use strict';
import HttpClient from '../clients/httpClient';
import ProvisioningProfileClient from '../clients/metaApi/provisioningProfile.client';
import ProvisioningProfileApi from './provisioningProfileApi';
import MetaApiWebsocketClient from '../clients/metaApi/metaApiWebsocket.client';
import MetatraderAccountApi from './metatraderAccountApi';
import MetatraderAccountClient from '../clients/metaApi/metatraderAccount.client';
import MetatraderAccountGeneratorApi from './metatraderAccountGeneratorApi';
import MetatraderAccountGeneratorClient from '../clients/metaApi/metatraderAccountGenerator.client';
import HistoricalMarketDataClient from '../clients/metaApi/historicalMarketData.client';
import ClientApiClient from '../clients/metaApi/clientApi.client';
import ConnectionRegistry from './connectionRegistry';
import { ValidationError } from '../clients/errorHandler';
import OptionsValidator from '../clients/optionsValidator';
import LatencyMonitor from './latencyMonitor';
import ExpertAdvisorClient from '../clients/metaApi/expertAdvisor.client';
import LoggerManager from '../logger';
import DomainClient from '../clients/domain.client';
import TerminalHashManager from './terminalHashManager';
import TokenManagementClient from '../clients/metaApi/tokenManagement.client';
import TokenManagementApi from './tokenManagementApi';
import _ from 'lodash';
let MetaApi = class MetaApi {
    /**
   * Enables using Log4js logger with extended log levels for debugging instead of
   * console.* functions. Note that log4js configuration performed by the user.
   */ static enableLog4jsLogging() {
        LoggerManager.useLog4js();
    }
    /**
   * Returns provisioning profile API
   * @returns {ProvisioningProfileApi} provisioning profile API
   */ get provisioningProfileApi() {
        return this._provisioningProfileApi;
    }
    /**
   * Returns MetaTrader account API
   * @return {MetatraderAccountApi} MetaTrader account API
   */ get metatraderAccountApi() {
        return this._metatraderAccountApi;
    }
    /**
   * Returns MetaTrader account generator API
   * @return {MetatraderDemoAccountApi} MetaTrader account generator API
   */ get metatraderAccountGeneratorApi() {
        return this._metatraderAccountGeneratorApi;
    }
    /**
   * Returns MetaApi application latency monitor
   * @return {LatencyMonitor} latency monitor
   */ get latencyMonitor() {
        return this._latencyMonitor;
    }
    /**
   * Returns token management API
   * @returns {TokenManagementApi} token management API
   */ get tokenManagementApi() {
        return this._tokenManagementApi;
    }
    /**
   * Closes all clients and connections and stops all internal jobs
   */ close() {
        this._metaApiWebsocketClient.removeLatencyListener(this._latencyMonitor);
        this._metaApiWebsocketClient.close();
        this._metaApiWebsocketClient.stop();
        this._terminalHashManager._stop();
    }
    /**
   * Constructs MetaApi class instance
   * @param {String} token authorization token
   * @param {MetaApiOpts} opts application options
   */ // eslint-disable-next-line complexity
    constructor(token, opts){
        const validator = new OptionsValidator();
        opts = _.omit(opts || {}, [
            'connections'
        ]);
        const application = opts.application || 'MetaApi';
        const domain = opts.domain || 'agiliumtrade.agiliumtrade.ai';
        const requestTimeout = validator.validateNonZero(opts.requestTimeout, 60, 'requestTimeout');
        const historicalMarketDataRequestTimeout = validator.validateNonZero(opts.historicalMarketDataRequestTimeout, 240, 'historicalMarketDataRequestTimeout');
        const connectTimeout = validator.validateNonZero(opts.connectTimeout, 60, 'connectTimeout');
        const packetOrderingTimeout = validator.validateNonZero(opts.packetOrderingTimeout, 60, 'packetOrderingTimeout');
        const retryOpts = opts.retryOpts || {};
        const packetLogger = opts.packetLogger || {};
        const synchronizationThrottler = opts.synchronizationThrottler || {};
        const accountGeneratorRequestTimeout = validator.validateNonZero(opts.accountGeneratorRequestTimeout, 240, 'accountGeneratorRequestTimeout');
        if (!application.match(/[a-zA-Z0-9_]+/)) {
            throw new ValidationError('Application name must be non-empty string consisting from letters, digits and _ only');
        }
        const useSharedClientApi = opts.useSharedClientApi || false;
        const refreshSubscriptionsOpts = opts.refreshSubscriptionsOpts || {};
        const httpClient = new HttpClient(requestTimeout, retryOpts);
        const domainClient = new DomainClient(httpClient, token, domain);
        const historicalMarketDataHttpClient = new HttpClient(historicalMarketDataRequestTimeout, retryOpts);
        const accountGeneratorHttpClient = new HttpClient(accountGeneratorRequestTimeout, retryOpts);
        const clientApiClient = new ClientApiClient(httpClient, domainClient);
        const tokenManagmentClient = new TokenManagementClient(httpClient, domainClient);
        this._terminalHashManager = new TerminalHashManager(clientApiClient, opts.keepHashTrees);
        this._metaApiWebsocketClient = new MetaApiWebsocketClient(this, domainClient, token, {
            application,
            domain,
            requestTimeout,
            connectTimeout,
            packetLogger,
            packetOrderingTimeout,
            synchronizationThrottler,
            retryOpts,
            useSharedClientApi,
            region: opts.region,
            unsubscribeThrottlingIntervalInSeconds: opts.unsubscribeThrottlingIntervalInSeconds
        });
        this._provisioningProfileApi = new ProvisioningProfileApi(new ProvisioningProfileClient(httpClient, domainClient));
        this._connectionRegistry = new ConnectionRegistry(opts, this._metaApiWebsocketClient, this._terminalHashManager, application, refreshSubscriptionsOpts);
        let historicalMarketDataClient = new HistoricalMarketDataClient(historicalMarketDataHttpClient, domainClient);
        this._metatraderAccountApi = new MetatraderAccountApi(new MetatraderAccountClient(httpClient, domainClient), this._metaApiWebsocketClient, this._connectionRegistry, new ExpertAdvisorClient(httpClient, domainClient), historicalMarketDataClient, application);
        this._metatraderAccountGeneratorApi = new MetatraderAccountGeneratorApi(new MetatraderAccountGeneratorClient(accountGeneratorHttpClient, domainClient));
        this._tokenManagementApi = new TokenManagementApi(tokenManagmentClient);
        if (opts.enableLatencyTracking || opts.enableLatencyMonitor) {
            this._latencyMonitor = new LatencyMonitor();
            this._metaApiWebsocketClient.addLatencyListener(this._latencyMonitor);
        }
        this._logger = LoggerManager.getLogger('MetaAPI');
        if (process.env.IS_BROWSER) {
            if (!this._tokenManagementApi.areTokenResourcesNarrowedDown(token)) {
                this._logger.warn('USING THE ADMIN TOKEN');
                // eslint-disable-next-line max-len
                this._logger.info('It seems like you are using a admin API token. Since the token can be retrieven from the browser or mobile apps by end user this can lead to your application being compromised, unless you understand what are you doing. Please use Token Management API (https://github.com/agiliumtrade-ai/metaapi-node.js-sdk/blob/master/docs/tokenManagementApi.md) in your backend application to produce secure tokens which you can then use in web UI or mobile apps.');
            }
        }
    }
};
/**
 * Request retry options
 * @typedef {Object} RetryOpts
 * @property {Number} [retries] maximum amount of request retries, default value is 5
 * @property {Number} [minDelayInSeconds] minimum delay in seconds until request retry, default value is 1
 * @property {Number} [maxDelayInSeconds] maximum delay in seconds until request retry, default value is 30
 * @property {Number} [longRunningRequestTimeoutInMinutes] timeout in minutes for long running requests, default 10
 */ /**
 * Subscriptions refresh options
 * @typedef {Object} RefreshSubscriptionsOpts
 * @property {Number} [minDelayInSeconds] minimum delay in seconds until subscriptions refresh request,
 * default value is 1
 * @property {Number} [maxDelayInSeconds] maximum delay in seconds until subscriptions refresh request,
 * default value is 600
 */ /**
 * MetaApi options
 * @typedef {Object} MetaApiOpts
 * @property {String} [application] application id
 * @property {String} [domain] domain to connect to, default is agiliumtrade.agiliumtrade.ai
 * @property {String} [region] region to connect to
 * @property {Number} [requestTimeout] timeout for socket requests in seconds
 * @property {Number} [connectTimeout] timeout for connecting to server in seconds
 * @property {Number} [packetOrderingTimeout] packet ordering timeout in seconds
 * @property {PacketLoggerOpts} [packetLogger] packet logger options
 * @property {Boolean} [enableLatencyMonitor] an option to enable latency tracking
 * @property {Boolean} [enableLatencyTracking] an option to enable latency tracking
 * @property {SynchronizationThrottlerOpts} [synchronizationThrottler] options for synchronization throttler
 * @property {RetryOpts} [retryOpts] options for request retries
 * @property {Boolean} [useSharedClientApi] option to use a shared server
 * @property {RefreshSubscriptionsOpts} [refreshSubscriptionsOpts] subscriptions refresh options
 * @property {Number} [unsubscribeThrottlingIntervalInSeconds] a timeout in seconds for throttling repeat unsubscribe
 * requests when synchronization packets still arrive after unsubscription, default is 10 seconds
 * @property {number} [accountGeneratorRequestTimeout] MT account generator API request timeout. Default is 4 minutes
 * @property {boolean} [keepHashTrees] if set to true, unused data will not be cleared (for use in debugging)
 */ /**
 * MetaApi MetaTrader API SDK
 */ export { MetaApi as default };

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxhbm9uPiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBIdHRwQ2xpZW50IGZyb20gJy4uL2NsaWVudHMvaHR0cENsaWVudCc7XG5pbXBvcnQgUHJvdmlzaW9uaW5nUHJvZmlsZUNsaWVudCBmcm9tICcuLi9jbGllbnRzL21ldGFBcGkvcHJvdmlzaW9uaW5nUHJvZmlsZS5jbGllbnQnO1xuaW1wb3J0IFByb3Zpc2lvbmluZ1Byb2ZpbGVBcGkgZnJvbSAnLi9wcm92aXNpb25pbmdQcm9maWxlQXBpJztcbmltcG9ydCBNZXRhQXBpV2Vic29ja2V0Q2xpZW50IGZyb20gJy4uL2NsaWVudHMvbWV0YUFwaS9tZXRhQXBpV2Vic29ja2V0LmNsaWVudCc7XG5pbXBvcnQgTWV0YXRyYWRlckFjY291bnRBcGkgZnJvbSAnLi9tZXRhdHJhZGVyQWNjb3VudEFwaSc7XG5pbXBvcnQgTWV0YXRyYWRlckFjY291bnRDbGllbnQgZnJvbSAnLi4vY2xpZW50cy9tZXRhQXBpL21ldGF0cmFkZXJBY2NvdW50LmNsaWVudCc7XG5pbXBvcnQgTWV0YXRyYWRlckFjY291bnRHZW5lcmF0b3JBcGkgZnJvbSAnLi9tZXRhdHJhZGVyQWNjb3VudEdlbmVyYXRvckFwaSc7XG5pbXBvcnQgTWV0YXRyYWRlckFjY291bnRHZW5lcmF0b3JDbGllbnQgZnJvbSAnLi4vY2xpZW50cy9tZXRhQXBpL21ldGF0cmFkZXJBY2NvdW50R2VuZXJhdG9yLmNsaWVudCc7XG5pbXBvcnQgSGlzdG9yaWNhbE1hcmtldERhdGFDbGllbnQgZnJvbSAnLi4vY2xpZW50cy9tZXRhQXBpL2hpc3RvcmljYWxNYXJrZXREYXRhLmNsaWVudCc7XG5pbXBvcnQgQ2xpZW50QXBpQ2xpZW50IGZyb20gJy4uL2NsaWVudHMvbWV0YUFwaS9jbGllbnRBcGkuY2xpZW50JztcbmltcG9ydCBDb25uZWN0aW9uUmVnaXN0cnkgZnJvbSAnLi9jb25uZWN0aW9uUmVnaXN0cnknO1xuaW1wb3J0IHtWYWxpZGF0aW9uRXJyb3J9IGZyb20gJy4uL2NsaWVudHMvZXJyb3JIYW5kbGVyJztcbmltcG9ydCBPcHRpb25zVmFsaWRhdG9yIGZyb20gJy4uL2NsaWVudHMvb3B0aW9uc1ZhbGlkYXRvcic7XG5pbXBvcnQgTGF0ZW5jeU1vbml0b3IgZnJvbSAnLi9sYXRlbmN5TW9uaXRvcic7XG5pbXBvcnQgRXhwZXJ0QWR2aXNvckNsaWVudCBmcm9tICcuLi9jbGllbnRzL21ldGFBcGkvZXhwZXJ0QWR2aXNvci5jbGllbnQnO1xuaW1wb3J0IExvZ2dlck1hbmFnZXIgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCBEb21haW5DbGllbnQgZnJvbSAnLi4vY2xpZW50cy9kb21haW4uY2xpZW50JztcbmltcG9ydCBUZXJtaW5hbEhhc2hNYW5hZ2VyIGZyb20gJy4vdGVybWluYWxIYXNoTWFuYWdlcic7XG5pbXBvcnQgVG9rZW5NYW5hZ2VtZW50Q2xpZW50IGZyb20gJy4uL2NsaWVudHMvbWV0YUFwaS90b2tlbk1hbmFnZW1lbnQuY2xpZW50JztcbmltcG9ydCBUb2tlbk1hbmFnZW1lbnRBcGkgZnJvbSAnLi90b2tlbk1hbmFnZW1lbnRBcGknO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuLyoqXG4gKiBSZXF1ZXN0IHJldHJ5IG9wdGlvbnNcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJldHJ5T3B0c1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtyZXRyaWVzXSBtYXhpbXVtIGFtb3VudCBvZiByZXF1ZXN0IHJldHJpZXMsIGRlZmF1bHQgdmFsdWUgaXMgNVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFttaW5EZWxheUluU2Vjb25kc10gbWluaW11bSBkZWxheSBpbiBzZWNvbmRzIHVudGlsIHJlcXVlc3QgcmV0cnksIGRlZmF1bHQgdmFsdWUgaXMgMVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFttYXhEZWxheUluU2Vjb25kc10gbWF4aW11bSBkZWxheSBpbiBzZWNvbmRzIHVudGlsIHJlcXVlc3QgcmV0cnksIGRlZmF1bHQgdmFsdWUgaXMgMzBcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbbG9uZ1J1bm5pbmdSZXF1ZXN0VGltZW91dEluTWludXRlc10gdGltZW91dCBpbiBtaW51dGVzIGZvciBsb25nIHJ1bm5pbmcgcmVxdWVzdHMsIGRlZmF1bHQgMTBcbiAqL1xuXG4vKipcbiAqIFN1YnNjcmlwdGlvbnMgcmVmcmVzaCBvcHRpb25zXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSZWZyZXNoU3Vic2NyaXB0aW9uc09wdHNcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbbWluRGVsYXlJblNlY29uZHNdIG1pbmltdW0gZGVsYXkgaW4gc2Vjb25kcyB1bnRpbCBzdWJzY3JpcHRpb25zIHJlZnJlc2ggcmVxdWVzdCxcbiAqIGRlZmF1bHQgdmFsdWUgaXMgMVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFttYXhEZWxheUluU2Vjb25kc10gbWF4aW11bSBkZWxheSBpbiBzZWNvbmRzIHVudGlsIHN1YnNjcmlwdGlvbnMgcmVmcmVzaCByZXF1ZXN0LFxuICogZGVmYXVsdCB2YWx1ZSBpcyA2MDBcbiAqL1xuXG4vKipcbiAqIE1ldGFBcGkgb3B0aW9uc1xuICogQHR5cGVkZWYge09iamVjdH0gTWV0YUFwaU9wdHNcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYXBwbGljYXRpb25dIGFwcGxpY2F0aW9uIGlkXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW2RvbWFpbl0gZG9tYWluIHRvIGNvbm5lY3QgdG8sIGRlZmF1bHQgaXMgYWdpbGl1bXRyYWRlLmFnaWxpdW10cmFkZS5haVxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtyZWdpb25dIHJlZ2lvbiB0byBjb25uZWN0IHRvXG4gKiBAcHJvcGVydHkge051bWJlcn0gW3JlcXVlc3RUaW1lb3V0XSB0aW1lb3V0IGZvciBzb2NrZXQgcmVxdWVzdHMgaW4gc2Vjb25kc1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtjb25uZWN0VGltZW91dF0gdGltZW91dCBmb3IgY29ubmVjdGluZyB0byBzZXJ2ZXIgaW4gc2Vjb25kc1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtwYWNrZXRPcmRlcmluZ1RpbWVvdXRdIHBhY2tldCBvcmRlcmluZyB0aW1lb3V0IGluIHNlY29uZHNcbiAqIEBwcm9wZXJ0eSB7UGFja2V0TG9nZ2VyT3B0c30gW3BhY2tldExvZ2dlcl0gcGFja2V0IGxvZ2dlciBvcHRpb25zXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtlbmFibGVMYXRlbmN5TW9uaXRvcl0gYW4gb3B0aW9uIHRvIGVuYWJsZSBsYXRlbmN5IHRyYWNraW5nXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtlbmFibGVMYXRlbmN5VHJhY2tpbmddIGFuIG9wdGlvbiB0byBlbmFibGUgbGF0ZW5jeSB0cmFja2luZ1xuICogQHByb3BlcnR5IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXJPcHRzfSBbc3luY2hyb25pemF0aW9uVGhyb3R0bGVyXSBvcHRpb25zIGZvciBzeW5jaHJvbml6YXRpb24gdGhyb3R0bGVyXG4gKiBAcHJvcGVydHkge1JldHJ5T3B0c30gW3JldHJ5T3B0c10gb3B0aW9ucyBmb3IgcmVxdWVzdCByZXRyaWVzXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFt1c2VTaGFyZWRDbGllbnRBcGldIG9wdGlvbiB0byB1c2UgYSBzaGFyZWQgc2VydmVyXG4gKiBAcHJvcGVydHkge1JlZnJlc2hTdWJzY3JpcHRpb25zT3B0c30gW3JlZnJlc2hTdWJzY3JpcHRpb25zT3B0c10gc3Vic2NyaXB0aW9ucyByZWZyZXNoIG9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbdW5zdWJzY3JpYmVUaHJvdHRsaW5nSW50ZXJ2YWxJblNlY29uZHNdIGEgdGltZW91dCBpbiBzZWNvbmRzIGZvciB0aHJvdHRsaW5nIHJlcGVhdCB1bnN1YnNjcmliZVxuICogcmVxdWVzdHMgd2hlbiBzeW5jaHJvbml6YXRpb24gcGFja2V0cyBzdGlsbCBhcnJpdmUgYWZ0ZXIgdW5zdWJzY3JpcHRpb24sIGRlZmF1bHQgaXMgMTAgc2Vjb25kc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFthY2NvdW50R2VuZXJhdG9yUmVxdWVzdFRpbWVvdXRdIE1UIGFjY291bnQgZ2VuZXJhdG9yIEFQSSByZXF1ZXN0IHRpbWVvdXQuIERlZmF1bHQgaXMgNCBtaW51dGVzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZWVwSGFzaFRyZWVzXSBpZiBzZXQgdG8gdHJ1ZSwgdW51c2VkIGRhdGEgd2lsbCBub3QgYmUgY2xlYXJlZCAoZm9yIHVzZSBpbiBkZWJ1Z2dpbmcpXG4gKi9cblxuLyoqXG4gKiBNZXRhQXBpIE1ldGFUcmFkZXIgQVBJIFNES1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRhQXBpIHtcblxuICAvKipcbiAgICogRW5hYmxlcyB1c2luZyBMb2c0anMgbG9nZ2VyIHdpdGggZXh0ZW5kZWQgbG9nIGxldmVscyBmb3IgZGVidWdnaW5nIGluc3RlYWQgb2ZcbiAgICogY29uc29sZS4qIGZ1bmN0aW9ucy4gTm90ZSB0aGF0IGxvZzRqcyBjb25maWd1cmF0aW9uIHBlcmZvcm1lZCBieSB0aGUgdXNlci5cbiAgICovXG4gIHN0YXRpYyBlbmFibGVMb2c0anNMb2dnaW5nKCkge1xuICAgIExvZ2dlck1hbmFnZXIudXNlTG9nNGpzKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0cyBNZXRhQXBpIGNsYXNzIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0b2tlbiBhdXRob3JpemF0aW9uIHRva2VuXG4gICAqIEBwYXJhbSB7TWV0YUFwaU9wdHN9IG9wdHMgYXBwbGljYXRpb24gb3B0aW9uc1xuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgY29uc3RydWN0b3IodG9rZW4sIG9wdHMpIHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgT3B0aW9uc1ZhbGlkYXRvcigpO1xuICAgIG9wdHMgPSBfLm9taXQob3B0cyB8fCB7fSwgWydjb25uZWN0aW9ucyddKTtcbiAgICBjb25zdCBhcHBsaWNhdGlvbiA9IG9wdHMuYXBwbGljYXRpb24gfHwgJ01ldGFBcGknO1xuICAgIGNvbnN0IGRvbWFpbiA9IG9wdHMuZG9tYWluIHx8ICdhZ2lsaXVtdHJhZGUuYWdpbGl1bXRyYWRlLmFpJztcbiAgICBjb25zdCByZXF1ZXN0VGltZW91dCA9IHZhbGlkYXRvci52YWxpZGF0ZU5vblplcm8ob3B0cy5yZXF1ZXN0VGltZW91dCwgNjAsICdyZXF1ZXN0VGltZW91dCcpO1xuICAgIGNvbnN0IGhpc3RvcmljYWxNYXJrZXREYXRhUmVxdWVzdFRpbWVvdXQgPSB2YWxpZGF0b3IudmFsaWRhdGVOb25aZXJvKFxuICAgICAgb3B0cy5oaXN0b3JpY2FsTWFya2V0RGF0YVJlcXVlc3RUaW1lb3V0LCAyNDAsICdoaXN0b3JpY2FsTWFya2V0RGF0YVJlcXVlc3RUaW1lb3V0Jyk7XG4gICAgY29uc3QgY29ubmVjdFRpbWVvdXQgPSB2YWxpZGF0b3IudmFsaWRhdGVOb25aZXJvKG9wdHMuY29ubmVjdFRpbWVvdXQsIDYwLCAnY29ubmVjdFRpbWVvdXQnKTtcbiAgICBjb25zdCBwYWNrZXRPcmRlcmluZ1RpbWVvdXQgPSB2YWxpZGF0b3IudmFsaWRhdGVOb25aZXJvKG9wdHMucGFja2V0T3JkZXJpbmdUaW1lb3V0LCA2MCwgJ3BhY2tldE9yZGVyaW5nVGltZW91dCcpO1xuICAgIGNvbnN0IHJldHJ5T3B0cyA9IG9wdHMucmV0cnlPcHRzIHx8IHt9O1xuICAgIGNvbnN0IHBhY2tldExvZ2dlciA9IG9wdHMucGFja2V0TG9nZ2VyIHx8IHt9O1xuICAgIGNvbnN0IHN5bmNocm9uaXphdGlvblRocm90dGxlciA9IG9wdHMuc3luY2hyb25pemF0aW9uVGhyb3R0bGVyIHx8IHt9O1xuICAgIGNvbnN0IGFjY291bnRHZW5lcmF0b3JSZXF1ZXN0VGltZW91dCA9IHZhbGlkYXRvci52YWxpZGF0ZU5vblplcm8ob3B0cy5hY2NvdW50R2VuZXJhdG9yUmVxdWVzdFRpbWVvdXQsIDI0MCxcbiAgICAgICdhY2NvdW50R2VuZXJhdG9yUmVxdWVzdFRpbWVvdXQnKTtcbiAgICBpZiAoIWFwcGxpY2F0aW9uLm1hdGNoKC9bYS16QS1aMC05X10rLykpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0FwcGxpY2F0aW9uIG5hbWUgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5nIGNvbnNpc3RpbmcgZnJvbSBsZXR0ZXJzLCBkaWdpdHMgYW5kIF8gb25seScpO1xuICAgIH1cbiAgICBjb25zdCB1c2VTaGFyZWRDbGllbnRBcGkgPSBvcHRzLnVzZVNoYXJlZENsaWVudEFwaSB8fCBmYWxzZTtcbiAgICBjb25zdCByZWZyZXNoU3Vic2NyaXB0aW9uc09wdHMgPSBvcHRzLnJlZnJlc2hTdWJzY3JpcHRpb25zT3B0cyB8fCB7fTtcbiAgICBjb25zdCBodHRwQ2xpZW50ID0gbmV3IEh0dHBDbGllbnQocmVxdWVzdFRpbWVvdXQsIHJldHJ5T3B0cyk7XG4gICAgY29uc3QgZG9tYWluQ2xpZW50ID0gbmV3IERvbWFpbkNsaWVudChodHRwQ2xpZW50LCB0b2tlbiwgZG9tYWluKTtcbiAgICBjb25zdCBoaXN0b3JpY2FsTWFya2V0RGF0YUh0dHBDbGllbnQgPSBuZXcgSHR0cENsaWVudChoaXN0b3JpY2FsTWFya2V0RGF0YVJlcXVlc3RUaW1lb3V0LCByZXRyeU9wdHMpO1xuICAgIGNvbnN0IGFjY291bnRHZW5lcmF0b3JIdHRwQ2xpZW50ID0gbmV3IEh0dHBDbGllbnQoYWNjb3VudEdlbmVyYXRvclJlcXVlc3RUaW1lb3V0LCByZXRyeU9wdHMpO1xuICAgIGNvbnN0IGNsaWVudEFwaUNsaWVudCA9IG5ldyBDbGllbnRBcGlDbGllbnQoaHR0cENsaWVudCwgZG9tYWluQ2xpZW50KTsgXG4gICAgY29uc3QgdG9rZW5NYW5hZ21lbnRDbGllbnQgPSBuZXcgVG9rZW5NYW5hZ2VtZW50Q2xpZW50KGh0dHBDbGllbnQsIGRvbWFpbkNsaWVudCk7IFxuICAgIHRoaXMuX3Rlcm1pbmFsSGFzaE1hbmFnZXIgPSBuZXcgVGVybWluYWxIYXNoTWFuYWdlcihjbGllbnRBcGlDbGllbnQsIG9wdHMua2VlcEhhc2hUcmVlcyk7XG4gICAgdGhpcy5fbWV0YUFwaVdlYnNvY2tldENsaWVudCA9IG5ldyBNZXRhQXBpV2Vic29ja2V0Q2xpZW50KHRoaXMsIGRvbWFpbkNsaWVudCwgdG9rZW4sXG4gICAgICB7YXBwbGljYXRpb24sIGRvbWFpbixcbiAgICAgICAgcmVxdWVzdFRpbWVvdXQsIGNvbm5lY3RUaW1lb3V0LCBwYWNrZXRMb2dnZXIsIHBhY2tldE9yZGVyaW5nVGltZW91dCwgc3luY2hyb25pemF0aW9uVGhyb3R0bGVyLCByZXRyeU9wdHMsXG4gICAgICAgIHVzZVNoYXJlZENsaWVudEFwaSwgcmVnaW9uOiBvcHRzLnJlZ2lvbixcbiAgICAgICAgdW5zdWJzY3JpYmVUaHJvdHRsaW5nSW50ZXJ2YWxJblNlY29uZHM6IG9wdHMudW5zdWJzY3JpYmVUaHJvdHRsaW5nSW50ZXJ2YWxJblNlY29uZHN9KTtcbiAgICB0aGlzLl9wcm92aXNpb25pbmdQcm9maWxlQXBpID0gbmV3IFByb3Zpc2lvbmluZ1Byb2ZpbGVBcGkobmV3IFByb3Zpc2lvbmluZ1Byb2ZpbGVDbGllbnQoaHR0cENsaWVudCwgZG9tYWluQ2xpZW50KSk7XG4gICAgdGhpcy5fY29ubmVjdGlvblJlZ2lzdHJ5ID0gbmV3IENvbm5lY3Rpb25SZWdpc3RyeShvcHRzLCB0aGlzLl9tZXRhQXBpV2Vic29ja2V0Q2xpZW50LCB0aGlzLl90ZXJtaW5hbEhhc2hNYW5hZ2VyLFxuICAgICAgYXBwbGljYXRpb24sIHJlZnJlc2hTdWJzY3JpcHRpb25zT3B0cyk7XG4gICAgbGV0IGhpc3RvcmljYWxNYXJrZXREYXRhQ2xpZW50ID0gbmV3IEhpc3RvcmljYWxNYXJrZXREYXRhQ2xpZW50KGhpc3RvcmljYWxNYXJrZXREYXRhSHR0cENsaWVudCwgZG9tYWluQ2xpZW50KTtcbiAgICB0aGlzLl9tZXRhdHJhZGVyQWNjb3VudEFwaSA9IG5ldyBNZXRhdHJhZGVyQWNjb3VudEFwaShuZXcgTWV0YXRyYWRlckFjY291bnRDbGllbnQoaHR0cENsaWVudCwgZG9tYWluQ2xpZW50KSxcbiAgICAgIHRoaXMuX21ldGFBcGlXZWJzb2NrZXRDbGllbnQsIHRoaXMuX2Nvbm5lY3Rpb25SZWdpc3RyeSwgXG4gICAgICBuZXcgRXhwZXJ0QWR2aXNvckNsaWVudChodHRwQ2xpZW50LCBkb21haW5DbGllbnQpLCBoaXN0b3JpY2FsTWFya2V0RGF0YUNsaWVudCwgYXBwbGljYXRpb24pO1xuICAgIHRoaXMuX21ldGF0cmFkZXJBY2NvdW50R2VuZXJhdG9yQXBpID0gbmV3IE1ldGF0cmFkZXJBY2NvdW50R2VuZXJhdG9yQXBpKFxuICAgICAgbmV3IE1ldGF0cmFkZXJBY2NvdW50R2VuZXJhdG9yQ2xpZW50KGFjY291bnRHZW5lcmF0b3JIdHRwQ2xpZW50LCBkb21haW5DbGllbnQpKTtcbiAgICB0aGlzLl90b2tlbk1hbmFnZW1lbnRBcGkgPSBuZXcgVG9rZW5NYW5hZ2VtZW50QXBpKHRva2VuTWFuYWdtZW50Q2xpZW50KTtcbiAgICBpZiAob3B0cy5lbmFibGVMYXRlbmN5VHJhY2tpbmcgfHwgb3B0cy5lbmFibGVMYXRlbmN5TW9uaXRvcikge1xuICAgICAgdGhpcy5fbGF0ZW5jeU1vbml0b3IgPSBuZXcgTGF0ZW5jeU1vbml0b3IoKTtcbiAgICAgIHRoaXMuX21ldGFBcGlXZWJzb2NrZXRDbGllbnQuYWRkTGF0ZW5jeUxpc3RlbmVyKHRoaXMuX2xhdGVuY3lNb25pdG9yKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5fbG9nZ2VyID0gTG9nZ2VyTWFuYWdlci5nZXRMb2dnZXIoJ01ldGFBUEknKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuSVNfQlJPV1NFUikge1xuICAgICAgaWYgKCF0aGlzLl90b2tlbk1hbmFnZW1lbnRBcGkuYXJlVG9rZW5SZXNvdXJjZXNOYXJyb3dlZERvd24odG9rZW4pKSB7XG4gICAgICAgIHRoaXMuX2xvZ2dlci53YXJuKCdVU0lORyBUSEUgQURNSU4gVE9LRU4nKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oJ0l0IHNlZW1zIGxpa2UgeW91IGFyZSB1c2luZyBhIGFkbWluIEFQSSB0b2tlbi4gU2luY2UgdGhlIHRva2VuIGNhbiBiZSByZXRyaWV2ZW4gZnJvbSB0aGUgYnJvd3NlciBvciBtb2JpbGUgYXBwcyBieSBlbmQgdXNlciB0aGlzIGNhbiBsZWFkIHRvIHlvdXIgYXBwbGljYXRpb24gYmVpbmcgY29tcHJvbWlzZWQsIHVubGVzcyB5b3UgdW5kZXJzdGFuZCB3aGF0IGFyZSB5b3UgZG9pbmcuIFBsZWFzZSB1c2UgVG9rZW4gTWFuYWdlbWVudCBBUEkgKGh0dHBzOi8vZ2l0aHViLmNvbS9hZ2lsaXVtdHJhZGUtYWkvbWV0YWFwaS1ub2RlLmpzLXNkay9ibG9iL21hc3Rlci9kb2NzL3Rva2VuTWFuYWdlbWVudEFwaS5tZCkgaW4geW91ciBiYWNrZW5kIGFwcGxpY2F0aW9uIHRvIHByb2R1Y2Ugc2VjdXJlIHRva2VucyB3aGljaCB5b3UgY2FuIHRoZW4gdXNlIGluIHdlYiBVSSBvciBtb2JpbGUgYXBwcy4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBwcm92aXNpb25pbmcgcHJvZmlsZSBBUElcbiAgICogQHJldHVybnMge1Byb3Zpc2lvbmluZ1Byb2ZpbGVBcGl9IHByb3Zpc2lvbmluZyBwcm9maWxlIEFQSVxuICAgKi9cbiAgZ2V0IHByb3Zpc2lvbmluZ1Byb2ZpbGVBcGkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3Zpc2lvbmluZ1Byb2ZpbGVBcGk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBNZXRhVHJhZGVyIGFjY291bnQgQVBJXG4gICAqIEByZXR1cm4ge01ldGF0cmFkZXJBY2NvdW50QXBpfSBNZXRhVHJhZGVyIGFjY291bnQgQVBJXG4gICAqL1xuICBnZXQgbWV0YXRyYWRlckFjY291bnRBcGkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21ldGF0cmFkZXJBY2NvdW50QXBpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgTWV0YVRyYWRlciBhY2NvdW50IGdlbmVyYXRvciBBUElcbiAgICogQHJldHVybiB7TWV0YXRyYWRlckRlbW9BY2NvdW50QXBpfSBNZXRhVHJhZGVyIGFjY291bnQgZ2VuZXJhdG9yIEFQSVxuICAgKi9cbiAgZ2V0IG1ldGF0cmFkZXJBY2NvdW50R2VuZXJhdG9yQXBpKCkge1xuICAgIHJldHVybiB0aGlzLl9tZXRhdHJhZGVyQWNjb3VudEdlbmVyYXRvckFwaTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIE1ldGFBcGkgYXBwbGljYXRpb24gbGF0ZW5jeSBtb25pdG9yXG4gICAqIEByZXR1cm4ge0xhdGVuY3lNb25pdG9yfSBsYXRlbmN5IG1vbml0b3JcbiAgICovXG4gIGdldCBsYXRlbmN5TW9uaXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fbGF0ZW5jeU1vbml0b3I7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0b2tlbiBtYW5hZ2VtZW50IEFQSVxuICAgKiBAcmV0dXJucyB7VG9rZW5NYW5hZ2VtZW50QXBpfSB0b2tlbiBtYW5hZ2VtZW50IEFQSVxuICAgKi9cbiAgZ2V0IHRva2VuTWFuYWdlbWVudEFwaSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG9rZW5NYW5hZ2VtZW50QXBpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyBhbGwgY2xpZW50cyBhbmQgY29ubmVjdGlvbnMgYW5kIHN0b3BzIGFsbCBpbnRlcm5hbCBqb2JzXG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9tZXRhQXBpV2Vic29ja2V0Q2xpZW50LnJlbW92ZUxhdGVuY3lMaXN0ZW5lcih0aGlzLl9sYXRlbmN5TW9uaXRvcik7XG4gICAgdGhpcy5fbWV0YUFwaVdlYnNvY2tldENsaWVudC5jbG9zZSgpO1xuICAgIHRoaXMuX21ldGFBcGlXZWJzb2NrZXRDbGllbnQuc3RvcCgpO1xuICAgIHRoaXMuX3Rlcm1pbmFsSGFzaE1hbmFnZXIuX3N0b3AoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkh0dHBDbGllbnQiLCJQcm92aXNpb25pbmdQcm9maWxlQ2xpZW50IiwiUHJvdmlzaW9uaW5nUHJvZmlsZUFwaSIsIk1ldGFBcGlXZWJzb2NrZXRDbGllbnQiLCJNZXRhdHJhZGVyQWNjb3VudEFwaSIsIk1ldGF0cmFkZXJBY2NvdW50Q2xpZW50IiwiTWV0YXRyYWRlckFjY291bnRHZW5lcmF0b3JBcGkiLCJNZXRhdHJhZGVyQWNjb3VudEdlbmVyYXRvckNsaWVudCIsIkhpc3RvcmljYWxNYXJrZXREYXRhQ2xpZW50IiwiQ2xpZW50QXBpQ2xpZW50IiwiQ29ubmVjdGlvblJlZ2lzdHJ5IiwiVmFsaWRhdGlvbkVycm9yIiwiT3B0aW9uc1ZhbGlkYXRvciIsIkxhdGVuY3lNb25pdG9yIiwiRXhwZXJ0QWR2aXNvckNsaWVudCIsIkxvZ2dlck1hbmFnZXIiLCJEb21haW5DbGllbnQiLCJUZXJtaW5hbEhhc2hNYW5hZ2VyIiwiVG9rZW5NYW5hZ2VtZW50Q2xpZW50IiwiVG9rZW5NYW5hZ2VtZW50QXBpIiwiXyIsIk1ldGFBcGkiLCJlbmFibGVMb2c0anNMb2dnaW5nIiwidXNlTG9nNGpzIiwicHJvdmlzaW9uaW5nUHJvZmlsZUFwaSIsIl9wcm92aXNpb25pbmdQcm9maWxlQXBpIiwibWV0YXRyYWRlckFjY291bnRBcGkiLCJfbWV0YXRyYWRlckFjY291bnRBcGkiLCJtZXRhdHJhZGVyQWNjb3VudEdlbmVyYXRvckFwaSIsIl9tZXRhdHJhZGVyQWNjb3VudEdlbmVyYXRvckFwaSIsImxhdGVuY3lNb25pdG9yIiwiX2xhdGVuY3lNb25pdG9yIiwidG9rZW5NYW5hZ2VtZW50QXBpIiwiX3Rva2VuTWFuYWdlbWVudEFwaSIsImNsb3NlIiwiX21ldGFBcGlXZWJzb2NrZXRDbGllbnQiLCJyZW1vdmVMYXRlbmN5TGlzdGVuZXIiLCJzdG9wIiwiX3Rlcm1pbmFsSGFzaE1hbmFnZXIiLCJfc3RvcCIsImNvbnN0cnVjdG9yIiwidG9rZW4iLCJvcHRzIiwidmFsaWRhdG9yIiwib21pdCIsImFwcGxpY2F0aW9uIiwiZG9tYWluIiwicmVxdWVzdFRpbWVvdXQiLCJ2YWxpZGF0ZU5vblplcm8iLCJoaXN0b3JpY2FsTWFya2V0RGF0YVJlcXVlc3RUaW1lb3V0IiwiY29ubmVjdFRpbWVvdXQiLCJwYWNrZXRPcmRlcmluZ1RpbWVvdXQiLCJyZXRyeU9wdHMiLCJwYWNrZXRMb2dnZXIiLCJzeW5jaHJvbml6YXRpb25UaHJvdHRsZXIiLCJhY2NvdW50R2VuZXJhdG9yUmVxdWVzdFRpbWVvdXQiLCJtYXRjaCIsInVzZVNoYXJlZENsaWVudEFwaSIsInJlZnJlc2hTdWJzY3JpcHRpb25zT3B0cyIsImh0dHBDbGllbnQiLCJkb21haW5DbGllbnQiLCJoaXN0b3JpY2FsTWFya2V0RGF0YUh0dHBDbGllbnQiLCJhY2NvdW50R2VuZXJhdG9ySHR0cENsaWVudCIsImNsaWVudEFwaUNsaWVudCIsInRva2VuTWFuYWdtZW50Q2xpZW50Iiwia2VlcEhhc2hUcmVlcyIsInJlZ2lvbiIsInVuc3Vic2NyaWJlVGhyb3R0bGluZ0ludGVydmFsSW5TZWNvbmRzIiwiX2Nvbm5lY3Rpb25SZWdpc3RyeSIsImhpc3RvcmljYWxNYXJrZXREYXRhQ2xpZW50IiwiZW5hYmxlTGF0ZW5jeVRyYWNraW5nIiwiZW5hYmxlTGF0ZW5jeU1vbml0b3IiLCJhZGRMYXRlbmN5TGlzdGVuZXIiLCJfbG9nZ2VyIiwiZ2V0TG9nZ2VyIiwicHJvY2VzcyIsImVudiIsIklTX0JST1dTRVIiLCJhcmVUb2tlblJlc291cmNlc05hcnJvd2VkRG93biIsIndhcm4iLCJpbmZvIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBLE9BQU9BLGdCQUFnQix3QkFBd0I7QUFDL0MsT0FBT0MsK0JBQStCLGdEQUFnRDtBQUN0RixPQUFPQyw0QkFBNEIsMkJBQTJCO0FBQzlELE9BQU9DLDRCQUE0Qiw2Q0FBNkM7QUFDaEYsT0FBT0MsMEJBQTBCLHlCQUF5QjtBQUMxRCxPQUFPQyw2QkFBNkIsOENBQThDO0FBQ2xGLE9BQU9DLG1DQUFtQyxrQ0FBa0M7QUFD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